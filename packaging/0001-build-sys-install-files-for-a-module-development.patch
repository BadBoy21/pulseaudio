From 15287398c813aa70ef72b8742de47e6156cd1c62 Mon Sep 17 00:00:00 2001
From: Jaska Uimonen <jaska.uimonen@helsinki.fi>
Date: Tue, 5 Jun 2012 11:36:13 +0300
Subject: [PATCH 01/48] build-sys: install files for a module development.

---
 Makefile.am                   |    8 +++++++-
 configure.ac                  |    1 +
 pulseaudio-module-devel.pc.in |   12 ++++++++++++
 3 files changed, 20 insertions(+), 1 deletions(-)
 create mode 100644 pulseaudio-module-devel.pc.in

diff --git a/Makefile.am b/Makefile.am
index 8a94a7c..b03892e 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -44,7 +44,10 @@ vapi_DATA = \
 		vala/libpulse-mainloop-glib.deps vala/libpulse-mainloop-glib.vapi
 
 pkgconfigdir = $(libdir)/pkgconfig
-pkgconfig_DATA = libpulse.pc libpulse-simple.pc
+pkgconfig_DATA = libpulse.pc libpulse-simple.pc pulseaudio-module-devel.pc
+
+moduledev_DATA = pulsecore-config.h src/pulsecore/*.h
+moduledevdir   = $(includedir)/pulsecore
 
 if HAVE_GLIB20
 pkgconfig_DATA += \
@@ -82,6 +85,9 @@ dist-hook:
 	echo $(VERSION) > $(distdir)/.tarball-version
 	echo $(VERSION) > $(distdir)/.version
 
+pulsecore-config.h: config.h
+	cp $< $@
+
 .PHONY: homepage distcleancheck doxygen
 
 # see git-version-gen
diff --git a/configure.ac b/configure.ac
index a78098c..69603c6 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1333,6 +1333,7 @@ man/default.pa.5.xml
 man/pulse-cli-syntax.5.xml
 man/start-pulseaudio-kde.1.xml
 man/start-pulseaudio-x11.1.xml
+pulseaudio-module-devel.pc
 ])
 
 AC_CONFIG_FILES([src/esdcompat:src/daemon/esdcompat.in], [chmod +x src/esdcompat])
diff --git a/pulseaudio-module-devel.pc.in b/pulseaudio-module-devel.pc.in
new file mode 100644
index 0000000..16ba4ea
--- /dev/null
+++ b/pulseaudio-module-devel.pc.in
@@ -0,0 +1,12 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+modlibexecdir=@modlibexecdir@
+
+Name: pulseaudio-module-devel
+Description: PulseAudio Module Development Interface
+Version: @PACKAGE_VERSION@
+Libs: -L${libdir} -L${libdir}/pulseaudio -lpulsecommon-@PA_MAJORMINOR@ -lpulsecore-@PA_MAJORMINOR@
+Libs.private:
+Cflags: -I${includedir} -D_REENTRANT
-- 
1.7.7.6

